---
layout: ru_post
title: Модульный конструктор уровней
---

Идея модульных конструкторов уровней стара, как мир. Вы делаете отдельными элементами (модулями) модели стен, углов, окон, дверных проёмов, арок и так далее. Но делаете эти модели так, чтобы они ровно стыковались друг с другом и позволяли сделать помещение любого размера без проблем, видимых стыков и других артефактов.
 
Смысл констукторов заключается в нескольких ключевых особенностях:

- Возможность масштабирования. Вы можете иметь только 3 модели (внешний угол, внутренний угол, прямая стена), из которых можно собрать целое подземелье с сотнями комнат. 
- Легко поддерживать. Если вы хотите исправить баг у модели, вам достаточно сделать это один раз и ассет изменится во всем игровом мире. 
- Легко расширять, добавлять новые элементы конструктора к существующему.
- Вы уменьшаете количество необходимых текстур, что сокращает затраты на производство контента.
- Многократное использование одних и тех же ассетов в пределах одного игрового уровня положительно влияет на производительность игры.
- Разделение труда. Художник создает элементы конструктора, левел-дизайнер собирает из них уровни. 


В теории создание конструктора - не сложное дело. Но в реальности требуется время, чтобы научиться проектировать его правильно, то есть так, чтобы все элементы грамотно стыковались друг с другом. А если у вас конструктор многоуровневый, включающий в себя перепады высот, лестницы, мосты и другие подобные элементы, то задача многократно усложняется.

Первым шагом при создании конструктора является работа по сетке. В зависимости от нужд конкретно вашей игры, вы определяете размер шага сетки. В Ancient Rivals я использовал кубик 2х2 метра (условно - размер человека в доспехах).

Как правило, конструктор создаётся по прямоугольной сетке. Бывают вариации, в том числе наклонные диагональные сетки, но укротить такого зверя могут только действительно опытные разработчики.

Поэтому я предлагаю вам строить свои модульные конструкторы на основе кубиков, это просто, удобно, и это работает.

![Alt text](http://i.imgur.com/nOfDk35.png)

Из кубиков вы собираете элементы конструктора. На этом шаге вам не нужны никакие детали; вам нужно добиться, чтобы все элементы корректно замыкались в цельную комнату. При этом надо стараться избегать элементов, размер которых меньше шага сетки, так как это индикатор неправильно спроектированного конструктора.

Минимальный набор элементов для конструктора подземелья:

- Прямая стена.
- Внешний угол (то есть остриём смотрит внутрь комнаты).
- Внутренний угол (остриём смотрит из комнаты наружу).
- Плитка пола (в случае, если вы хотите собирать пол из цельных плиток, а не делать несколько больших плоскостей с тайлящейся текстурой пола).

Когда вы закончили создание конструктора из кубиков, оттестировали его в разных ситуациях, с комнатами разного размера и формы, значит пришло время делать реальные модели вашего уровня. Аккуратно следуйте вашим заготовкам. Делайте все новые модели одновременно, чтобы не случилось так, что вы взяли какой-нибудь угол, сделали его просто невероятно красивым, и потом оказывается, что вы не учли какой-то нюанс, и ваша работа отправляется прямиком в мусорную корзину.

Работайте итерациями. Потратьте 20 минут на каждый элемент конструктора, затем поглядите, как они работают вместе, как стыкуются. Затем ещё по полчаса на каждый. И так далее по шагам всё больше усложняйте и детализируйте ваши ассеты.

Если вы чётко следуете вашим макетам из кубиков, работаете по сетке, то получите что-то такое:

![Alt text](http://i.imgur.com/GM7Orel.png)

![Alt text](http://i.imgur.com/RdyamtY.png)

Напоследок важное замечание. Создание модульного конструктора - это тесная командная работа между левел-дизайнером и художником, создающим финальные ассеты. Они вместе работают, начиная с самого первого кубика. Даже когда конструктор готов, между специалистами продолжается диалог: как можно улучшить конструктор, что можно сделать лучше в следующий раз. 
